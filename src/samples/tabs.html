<html lang="" ng-app="portal" ng-cloak>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="../assets/css/normalize.css" rel="stylesheet">
    <style>
    .active{ background-color:red;}
    </style>
</head>
<body>
  <div class="tabs">
    <ul>
      <li class="tab-title" data-target="#tab-content-1">
        <a href="#">tab 1</a>
      </li>
      <li class="tab-title" data-target="#tab-content-2">
        <a href="#tab-content-2">tab 2</a>
      </li>
    </ul>

    <div class="tab-content" id="tab-content-1">
      content 1
    </div>
    <div class="tab-content" id="tab-content-2">
      content 2
    </div>
  </div>


<script type="text/javascript" src="../assets/js/jquery.js"></script>

<script>
  /**
  // lazy
  tabs.tabs('.tabs').on('change', function(){});
  */
  var tabs = {
    init: function(region){
      $('.tab-content', region).hide();
    },

    getTabContent: function(tabTitle){
      var tabTitle = $(tabTitle);
      var selector;

      if(tabTitle.is('[data-target]')) {
        selector = tabTitle.attr('data-target');
      } else {
        selector = tabTitle.find('[data-target]').attr('data-target');
      }

      return selector ? $(selector) : null;
    },

    change: function(tab){
      //触发的tab-title及对应的tab-content
      var triggeredTabTitle = $(tab).closest('.tab-title');
      var triggeredTabContent = this.getTabContent(triggeredTabTitle);

      if($(triggeredTabTitle).is('.active')) {
        return;
      }

      var currentTabTitle = $('.tabs .tab-title.active');

      if(currentTabTitle.index() != -1) {
        var currentTabTitle = $(currentTabTitle.get(0));
        var currentTabContent = this.getTabContent(currentTabTitle);
        //将current恢复为普通状态: 标题移除current样式类, 内容隐藏
        currentTabTitle.removeClass('active');
        currentTabContent.hide();
      }

      //将触发标签及内容转换为current状态
      triggeredTabTitle.addClass('active');
      triggeredTabContent.show();
    },

    tabs: function(region, eventType){
      if(!eventType){
        eventType = 'click';
      }
      var _this = this;
      var _ = function (){
        _this.init(region);
        $(region).on(eventType, '.tab-title', function(event){
          //var delegateTarget = event.delegateTarget;
          _this.change(event.target);
        });
      };

      if($.isReady) {
        _();
      } else {
        $(function(){
          _();
        });
      }
    }
  };

  tabs.tabs('.tabs');

</script>
<div id="debug"></div>
</body>
</html>
